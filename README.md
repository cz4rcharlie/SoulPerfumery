# Soul Perfumery (灵魂调香室)

一款寻找内心香气的治愈系网页小游戏。调制情绪原料，发现你的专属心境，生成独特的灵魂小票。

🌐 **在线体验**: [soul-perfumery.top](https://soul-perfumery.top)

## 💡 核心概念 (Concept)
**"你的灵魂是什么味道？"**

在这个虚拟的调香室中，玩家将扮演一位调香师。这里没有传统的香精，只有代表不同情绪的颜色原料——心动、慵懒、专注、忧郁... 

当你将这些情绪注入瓶中，液体会根据配比实时混合，颜色随之流转。最终，系统会根据你的调配结果，打印出一张带有**专属香水名**、**治愈签文**和**成分分析**的"灵魂小票"。

*   **治愈 (Healing)**: 莫兰迪色系与柔和的流体动画，提供片刻的宁静。
*   **表达 (Expression)**: 用颜色具象化情绪，每一次调配都是一次自我对话。
*   **仪式感 (Ritual)**: 拟真的小票生成与保存功能，将无形的情绪转化为可收藏的数字纪念品。

## ✨ 功能亮点
- **情绪调配**: 8种情绪原料，实时流体混合模拟
- **高级质感**: 玻璃拟态 (Glassmorphism) 瓶身设计，光影细节丰富
- **灵魂小票**: 自动生成高精度收据风格图片，支持点击下载保存
- **背景音乐**: 沉浸式音效体验，可随时控制播放/暂停
- **响应式设计**: 完美适配移动端和桌面端

## 🛠 技术栈
- **HTML5 Canvas**: 核心流体波浪与粒子系统实现
- **CSS3**: 高级玻璃质感、阴影与动效
- **Vanilla JavaScript**: 纯原生 JS，无框架依赖
- **[html2canvas](https://html2canvas.hertzen.com/)**: 实现小票 DOM 节点到图片的高清渲染
- **Google Fonts**: 优雅的字体设计

## 🚀 快速开始

### 本地运行
1. 克隆或下载项目
2. 使用任意 HTTP 服务器打开 `index.html`
   ```bash
   # 使用 Python
   python -m http.server 8000
   
   # 或使用 Node.js
   npx serve
   ```
3. 在浏览器中访问 `http://localhost:8000`

### 部署
项目为纯静态文件，可部署到任意静态托管服务：
- GitHub Pages
- Vercel
- Netlify
- 或其他静态网站托管服务

## 📝 使用说明
1. 点击不同的情绪原料，将其注入瓶中
2. 观察液体颜色实时混合变化
3. 当液位达到一定高度，点击"打印小票"按钮
4. 等待生成完成后，点击图片即可下载保存

## 🎨 情绪原料
- **心动·Crush** - 温柔粉色
- **慵懒·Lazy** - 淡雅紫色
- **专注·Focus** - 清新绿色
- **忧郁·Emo** - 宁静蓝色
- **热烈·Passion** - 活力红色
- **治愈·Heal** - 柔和黄绿
- **神秘·Mystery** - 深邃紫蓝
- **空灵·Blank** - 纯净白色

## 🌈 灵魂文案系统

系统会根据你调配出的最终颜色，自动生成6种不同的灵魂文案。每种文案都包含独特的香水名、关键词和治愈签文。

### 文案类型与触发逻辑

#### 1. **半熟芝士** (Red - 红色系)
- **触发条件**: 红色成分比例 > 35% 且为最高值
- **关键词**: Wild / Passion / Spark
- **签文**: "你的野心是红色的。保持柔软，偶尔带点锋芒。永远年轻，永远热泪盈眶。"
- **推荐原料**: 多使用"心动·Crush"或"热烈·Passion"
- **出现概率**: ~13%

#### 2. **暮色温柔** (Purple - 紫色系)
- **触发条件**: 红色和蓝色都相对较高，绿色比例较低，且红蓝接近
- **关键词**: Lazy / Soft / Sunset
- **签文**: "世界很匆忙，别因为赶路而忘了感受夕阳。做一个浪漫的实用主义者。"
- **推荐原料**: "热烈·Passion"+"神秘·Mystery"、"心动·Crush"+"慵懒·Lazy"、"热烈·Passion"+"慵懒·Lazy"、"慵懒·Lazy"+"神秘·Mystery"等组合
- **出现概率**: ~12.5%

#### 3. **薄荷森林** (Green - 绿色系)
- **触发条件**: 绿色成分比例 > 35% 且为最高值
- **关键词**: Heal / Fresh / Oxygen
- **签文**: "在自己的星球上，修剪玫瑰。你拥有一种让时间慢下来的超能力。治愈自己，也治愈他人。"
- **推荐原料**: 多使用"专注·Focus"或"治愈·Heal"
- **出现概率**: ~13%

#### 4. **深海来信** (Blue - 蓝色系)
- **触发条件**: 蓝色成分比例 > 35% 且为最高值
- **关键词**: Deep / Silence / Soul
- **签文**: "外表冷静自持，内心藏着一片海。所有的不期而遇，都在路上。懂你的人很少，但很贵。"
- **推荐原料**: 多使用"忧郁·Emo"、"神秘·Mystery"或"慵懒·Lazy"
- **出现概率**: ~37%

#### 5. **白日梦想** (Light - 浅色系)
- **触发条件**: 所有颜色值都较高（红色、绿色、蓝色均 > 220）
- **关键词**: Pure / Dream / Cloud
- **签文**: "知世故而不世故，是你最温柔的铠甲。愿你依然相信童话。"
- **推荐原料**: 多使用"空灵·Blank"
- **出现概率**: ~4.2%

#### 6. **银河碎片** (Mixed - 混合色)
- **触发条件**: RGB差异 < 40 或无明显主导比例
- **关键词**: Complex / Unique / Art
- **签文**: "你的灵魂是流动的。不要试图定义自己，你本身就是无限可能。你是揉碎的星光。"
- **推荐原料**: 使用3种以上不同颜色的原料进行复杂混合
- **出现概率**: ~21%

### 颜色判断算法说明

系统使用**优雅的RGB比例分析算法**来判断最终颜色类型：

1. **直接成分分析**：基于所有使用原料的RGB加权平均，直接得到最终颜色
2. **比例判断**：计算RGB成分比例，基于比例进行颜色分类
3. **智能阈值**：
   - **主色调判断**：RGB比例 > 35% 且为最大值
   - **紫色判断**：红蓝比例较高，绿色比例较低
   - **混合色判断**：RGB差异 < 40 或无明显主导比例
4. **优势**：无需模拟点击顺序，直接基于最终成分，算法简洁高效

### 💡 探索建议

- 尝试不同的原料组合，发现更多可能性
- 每种文案都是独特的，没有好坏之分
- 多次调配，体验不同的情绪表达
- 保存你喜欢的灵魂小票，作为情绪记录

## 🧪 测试

项目包含完整的颜色判断逻辑测试文件 `test-color-logic.html`，包含50+个测试用例，覆盖所有色系和边界情况：

- **基础颜色测试**：25个用例（红绿蓝紫浅色混合的所有典型和边界情况）
- **原料混合测试**：16个用例（实际原料的各种组合和比例测试）
- **边界情况测试**：6个用例（所有阈值的临界值验证）
- **成分列表生成测试**：4个用例（小票成分显示逻辑验证）

在浏览器中打开 `test-color-logic.html` 即可查看测试结果，确保所有色系都能正确识别。
